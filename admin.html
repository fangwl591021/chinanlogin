<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>穿山甲專車後台 v3.4</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root {
  --text-lg: 18px;
  --text-xl: 22px;
  --text-2xl: 28px;
}
body {
  background:#f8fafc;
  font-family: "Noto Sans TC", system-ui, sans-serif;
  font-size: var(--text-lg);
  line-height:1.6;
  color:#334155;
}

/* ===== 左側選單 ===== */
aside {
  width: 260px;
  background:#ffffff;
  border-right:1px solid #e5e7eb;
  box-shadow: 2px 0 6px rgba(0,0,0,0.05);
}
.sidebar-btn {
  display:block;
  width:100%;
  padding:14px 18px;
  text-align:left;
  font-size:var(--text-lg);
  border-radius:8px;
  transition:background .2s;
}
.sidebar-btn:hover { background:#e0f2e9; color:#256d3f; }
.sidebar-btn.active { background:#3c8050; color:white; font-weight:700; }

/* ===== 主內容區 ===== */
.card {
  background:white;
  border-radius:16px;
  padding:28px;
  box-shadow:0 2px 10px rgba(0,0,0,0.08);
  max-width:1080px;
  margin:auto;
}
.section-title {
  font-weight:800;
  font-size:var(--text-xl);
  color:#14532d;
  margin-bottom:16px;
  display:flex;
  align-items:center;
}
.section-title::before {
  content:"";
  display:inline-block;
  width:8px;
  height:24px;
  background:#22c55e;
  border-radius:3px;
  margin-right:10px;
}

/* ===== 表單樣式 ===== */
input, textarea, select {
  font-size: var(--text-lg);
  border-radius:8px;
  padding:8px 10px;
  border:1px solid #cbd5e1;
}
button {
  font-size: var(--text-lg);
  font-weight:600;
  border-radius:10px;
  padding:12px 16px;
  transition: all .2s;
}
button:hover { opacity:0.9; }
table { font-size: var(--text-lg); }

/* ===== 響應式 ===== */
@media (max-width: 1024px) {
  aside { width:220px; }
  .card { padding:20px; }
}

/* 載入中指示器 */
#loadingMessage {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 30px;
    font-size: var(--text-xl);
    color: #64748b;
}

/* 簽到狀態樣式 */
.checkin-status {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 4px 10px;
  border-radius: 20px;
  font-size: 14px;
  font-weight: 600;
}

.checkin-yes {
  background-color: #d1fae5;
  color: #065f46;
}

.checkin-no {
  background-color: #fef3c7;
  color: #92400e;
}

/* 簽到按鈕樣式 */
.checkin-btn {
  padding: 6px 12px;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 600;
  transition: all 0.2s;
  border: none;
  cursor: pointer;
}

.checkin-btn.checked {
  background-color: #10b981;
  color: white;
}

.checkin-btn.unchecked {
  background-color: #f3f4f6;
  color: #6b7280;
  border: 1px solid #d1d5db;
}

.checkin-btn.unchecked:hover {
  background-color: #e5e7eb;
}

/* 狀態標籤樣式 */
.status-confirmed { 
  background-color: #d1fae5; 
  color: #065f46; 
  padding: 4px 10px; 
  border-radius: 20px; 
  font-size: 14px;
  font-weight: 600;
}
.status-cancelled { 
  background-color: #fecaca; 
  color: #991b1b; 
  padding: 4px 10px; 
  border-radius: 20px; 
  font-size: 14px;
  font-weight: 600;
}
.status-pending { 
  background-color: #fef3c7; 
  color: #92400e; 
  padding: 4px 10px; 
  border-radius: 20px; 
  font-size: 14px;
  font-weight: 600;
}

/* 容量設定樣式 */
.capacity-input {
  border: 2px solid #e5e7eb;
  transition: all 0.3s;
}
.capacity-input:focus {
  border-color: #10b981;
  box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
}
.capacity-label {
  font-weight: 600;
  color: #374151;
}

</style>
</head>

<body class="flex h-screen overflow-hidden">

<!-- 🧭 左側導覽區 -->
<aside class="flex flex-col">
  <div class="p-5 border-b text-center bg-green-700 text-white">
    <h1 class="text-2xl font-bold">🚌 後台管理</h1>
    <p class="text-sm opacity-90">穿山甲專車系統</p>
  </div>

  <nav class="flex-1 p-3 space-y-2">
    <button class="sidebar-btn active" data-target="config">🔧 營運設定</button>
    <button class="sidebar-btn" data-target="dashboard">📊 儀表板</button>
    <button class="sidebar-btn" data-target="reservations">🧾 預約查詢</button>
    <button class="sidebar-btn" data-target="drivers">🚐 司機班表</button>
  </nav>

  <div class="p-4 border-t text-center text-gray-600 text-sm">
    ⚙️ <a href="#" id="reloadLink" class="underline">重新整理資料</a>
  </div>
</aside>

<!-- 🖥️ 右側主內容 -->
<main class="flex-1 overflow-y-auto p-8">

  <!-- 🔧 營運設定 -->
  <section id="config" class="card block">
    <h2 class="section-title">🔧 營運設定中心</h2>

    <label class="block font-semibold mb-2">運營模式：</label>
    <div class="flex gap-6 mb-4 text-lg">
      <label><input type="radio" name="mode" value="S3" class="mr-1" /> 單趟制（S3）</label>
      <label><input type="radio" name="mode" value="S4" class="mr-1" checked /> 來回制（S4）</label>
    </div>

    <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6 text-lg">
      <div class="flex flex-col items-center">
        <label class="capacity-label mb-2">A1 班次</label>
        <input id="capA1" type="number" min="1" max="50" value="6" class="capacity-input border rounded px-3 py-2 w-24 text-center">
        <span class="text-sm text-gray-500 mt-1">可預約人數</span>
      </div>
      <div class="flex flex-col items-center">
        <label class="capacity-label mb-2">A2 班次</label>
        <input id="capA2" type="number" min="1" max="50" value="6" class="capacity-input border rounded px-3 py-2 w-24 text-center">
        <span class="text-sm text-gray-500 mt-1">可預約人數</span>
      </div>
      <div class="flex flex-col items-center">
        <label class="capacity-label mb-2">B1 班次</label>
        <input id="capB1" type="number" min="1" max="50" value="6" class="capacity-input border rounded px-3 py-2 w-24 text-center">
        <span class="text-sm text-gray-500 mt-1">可預約人數</span>
      </div>
      <div class="flex flex-col items-center">
        <label class="capacity-label mb-2">B2 班次</label>
        <input id="capB2" type="number" min="1" max="50" value="6" class="capacity-input border rounded px-3 py-2 w-24 text-center">
        <span class="text-sm text-gray-500 mt-1">可預約人數</span>
      </div>
    </div>

    <div class="space-y-3 mb-6">
      <label><input type="checkbox" id="enableBooking" class="mr-1" checked> 開放預約</label><br>
      <label><input type="checkbox" id="enableCancel" class="mr-1" checked> 允許取消</label>
    </div>

    <div class="mb-4">
      <label class="block font-semibold mb-2">系統公告：</label>
      <textarea id="announcement" rows="3" class="w-full border rounded px-3 py-2 text-lg" placeholder="輸入系統公告訊息...">歡迎使用穿山甲專車預約系統！</textarea>
    </div>

    <div class="flex gap-3">
      <button id="saveConfig" class="bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded flex-1 text-lg">
        💾 儲存設定
      </button>
      <button id="publishConfig" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded flex-1 text-lg">
        🚀 發佈到前端
      </button>
    </div>

    <!-- 即時預覽 -->
    <div class="mt-6 p-4 bg-gray-50 rounded-lg">
      <h3 class="font-semibold text-lg mb-3">📱 前端即時預覽</h3>
      <div class="grid grid-cols-2 gap-4 text-sm">
        <div>
          <span class="font-medium">A1 班次容量：</span>
          <span id="previewA1" class="text-green-600 font-bold">6</span>
        </div>
        <div>
          <span class="font-medium">A2 班次容量：</span>
          <span id="previewA2" class="text-green-600 font-bold">6</span>
        </div>
        <div>
          <span class="font-medium">B1 班次容量：</span>
          <span id="previewB1" class="text-green-600 font-bold">6</span>
        </div>
        <div>
          <span class="font-medium">B2 班次容量：</span>
          <span id="previewB2" class="text-green-600 font-bold">6</span>
        </div>
        <div class="col-span-2">
          <span class="font-medium">預約狀態：</span>
          <span id="previewBooking" class="text-green-600 font-bold">開放中</span>
        </div>
      </div>
    </div>
  </section>

  <!-- 📊 儀表板 -->
  <section id="dashboard" class="card hidden">
    <h2 class="section-title">📊 營運儀表板</h2>
    <div class="grid grid-cols-2 gap-6 mb-6">
      <div>
        <p class="font-semibold text-lg">今日總預約數：</p>
        <p id="todayTotal" class="text-4xl font-bold text-green-700 mt-1">--</p>
      </div>
      <div>
        <p class="font-semibold text-lg">剩餘名額：</p>
        <p id="remainingSeats" class="text-4xl font-bold text-blue-700 mt-1">--</p>
      </div>
    </div>
    <canvas id="chartTrips" height="120"></canvas>
  </section>

  <!-- 🧾 預約查詢 -->
  <section id="reservations" class="card hidden">
    <h2 class="section-title">🧾 預約查詢與管理</h2>
    <div class="flex gap-3 mb-4">
      <input id="searchInput" placeholder="輸入姓名 / 日期 / 班次搜尋..." class="border rounded px-3 py-2 w-full text-lg">
      <button id="exportCsv" class="bg-gray-700 text-white px-5 py-3 rounded hover:bg-gray-800 text-lg">📤 匯出CSV</button>
    </div>
    <div id="reservationTable" class="overflow-x-auto text-base">
      <table class="min-w-full border">
        <thead class="bg-green-700 text-white">
          <tr>
            <th class="p-3 border">日期</th>
            <th class="p-3 border">班次</th>
            <th class="p-3 border">姓名</th>
            <th class="p-3 border">系所/註記</th>
            <th class="p-3 border">電話</th>
            <th class="p-3 border">狀態</th>
            <th class="p-3 border">簽到狀態</th>
            <th class="p-3 border">操作</th>
          </tr>
        </thead>
        <tbody id="reservationBody">
          <tr><td colspan="8" id="loadingMessage">點擊「預約查詢」載入資料...</td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- 🚐 司機班表 -->
  <section id="drivers" class="card hidden">
    <h2 class="section-title">🚐 司機班表</h2>
    <table class="min-w-full border text-base">
      <thead class="bg-blue-700 text-white">
        <tr>
          <th class="p-3 border">日期</th>
          <th class="p-3 border">A1 (22:00→22:30)</th>
          <th class="p-3 border">A2 (23:00→23:30)</th>
          <th class="p-3 border">B1 (22:30→23:00)</th>
          <th class="p-3 border">B2 (23:30→24:00)</th>
        </tr>
      </thead>
      <tbody id="driverTable">
        <tr class="text-center">
          <td class="p-2 border">2025-10-13</td>
          <td class="p-2 border">王大明</td>
          <td class="p-2 border">李小美</td>
          <td class="p-2 border">張志強</td>
          <td class="p-2 border">林佩芬</td>
        </tr>
      </tbody>
    </table>
  </section>

</main>

<!-- JS -->
<script>
// 🚨🚨🚨 請將這裡替換成您實際部署的 Cloudflare Worker URL 🚨🚨🚨
const WORKER_URL = 'https://delicate-math-7e61.fangwl591021.workers.dev/'; 

const sections = document.querySelectorAll("main section");
const reservationBody = document.getElementById('reservationBody');
const searchInput = document.getElementById('searchInput');

let allReservations = []; // 用於儲存從 API 獲取的原始資料

// 系統設定資料
let systemConfig = {
  capacities: {
    A1: 6,
    A2: 6,
    B1: 6,
    B2: 6
  },
  mode: 'S4',
  enableBooking: true,
  enableCancel: true,
  announcement: '歡迎使用穿山甲專車預約系統！'
};

// 初始化設定
function initializeConfig() {
  // 從 localStorage 載入設定（如果有的話）
  const savedConfig = localStorage.getItem('pangolinBusConfig');
  if (savedConfig) {
    systemConfig = JSON.parse(savedConfig);
  }
  
  // 更新表單顯示
  document.getElementById('capA1').value = systemConfig.capacities.A1;
  document.getElementById('capA2').value = systemConfig.capacities.A2;
  document.getElementById('capB1').value = systemConfig.capacities.B1;
  document.getElementById('capB2').value = systemConfig.capacities.B2;
  
  document.querySelector(`input[name="mode"][value="${systemConfig.mode}"]`).checked = true;
  document.getElementById('enableBooking').checked = systemConfig.enableBooking;
  document.getElementById('enableCancel').checked = systemConfig.enableCancel;
  document.getElementById('announcement').value = systemConfig.announcement;
  
  // 更新預覽
  updatePreview();
}

// 更新即時預覽
function updatePreview() {
  document.getElementById('previewA1').textContent = systemConfig.capacities.A1;
  document.getElementById('previewA2').textContent = systemConfig.capacities.A2;
  document.getElementById('previewB1').textContent = systemConfig.capacities.B1;
  document.getElementById('previewB2').textContent = systemConfig.capacities.B2;
  document.getElementById('previewBooking').textContent = systemConfig.enableBooking ? '開放中' : '已關閉';
}

// 儲存設定到 localStorage
function saveConfigToLocal() {
  // 從表單讀取值
  systemConfig.capacities.A1 = parseInt(document.getElementById('capA1').value) || 6;
  systemConfig.capacities.A2 = parseInt(document.getElementById('capA2').value) || 6;
  systemConfig.capacities.B1 = parseInt(document.getElementById('capB1').value) || 6;
  systemConfig.capacities.B2 = parseInt(document.getElementById('capB2').value) || 6;
  
  systemConfig.mode = document.querySelector('input[name="mode"]:checked').value;
  systemConfig.enableBooking = document.getElementById('enableBooking').checked;
  systemConfig.enableCancel = document.getElementById('enableCancel').checked;
  systemConfig.announcement = document.getElementById('announcement').value;
  
  // 儲存到 localStorage
  localStorage.setItem('pangolinBusConfig', JSON.stringify(systemConfig));
  
  // 更新預覽
  updatePreview();
  
  return systemConfig;
}

// 發佈設定到前端系統
async function publishConfigToFrontend() {
  const config = saveConfigToLocal();
  
  try {
    // 這裡可以替換成您實際的前端 API 端點
    // 範例：發送到 Cloudflare Worker 或其他後端服務
    const response = await fetch(`${WORKER_URL}?mode=updateConfig`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(config)
    });
    
    if (response.ok) {
      showNotification('✅ 設定已成功發佈到前端系統！', 'success');
      console.log('設定已發佈：', config);
    } else {
      throw new Error('發佈失敗');
    }
  } catch (error) {
    // 如果沒有實際的 API，我們模擬成功發佈
    console.log('模擬發佈設定到前端：', config);
    showNotification('✅ 設定已成功更新（模擬發佈）！', 'success');
    
    // 在實際環境中，您應該取消下面的註解並處理錯誤
    // showNotification('❌ 發佈失敗，請檢查網路連線', 'error');
  }
}

// 從後端載入當前設定
async function loadConfigFromBackend() {
  try {
    const response = await fetch(`${WORKER_URL}?mode=getConfig`);
    if (response.ok) {
      const backendConfig = await response.json();
      
      // 合併後端設定（如果有的話）
      if (backendConfig && backendConfig.capacities) {
        systemConfig = { ...systemConfig, ...backendConfig };
        initializeConfig();
        showNotification('✅ 已從後端載入最新設定', 'success');
      }
    }
  } catch (error) {
    console.log('無法從後端載入設定，使用本地設定');
  }
}

// 容量輸入即時更新
function setupCapacityListeners() {
  const capacityInputs = ['capA1', 'capA2', 'capB1', 'capB2'];
  
  capacityInputs.forEach(id => {
    document.getElementById(id).addEventListener('input', function() {
      const value = parseInt(this.value) || 0;
      if (value < 1) this.value = 1;
      if (value > 50) this.value = 50;
      
      // 即時更新預覽
      const route = id.replace('cap', '');
      document.getElementById(`preview${route}`).textContent = this.value;
    });
  });
  
  // 其他設定變更監聽
  document.getElementById('enableBooking').addEventListener('change', function() {
    document.getElementById('previewBooking').textContent = this.checked ? '開放中' : '已關閉';
  });
}

// 渲染表格
function renderReservations(data) {
    if (!data || data.length === 0) {
        reservationBody.innerHTML = `<tr><td colspan="8" class="p-4 text-center text-gray-500">
                                      目前沒有預約資料。
                                    </td></tr>`;
        return;
    }

    reservationBody.innerHTML = ''; 

    data.forEach((item, index) => {
        const row = document.createElement('tr');
        row.className = index % 2 === 1 ? 'text-center bg-gray-50' : 'text-center'; 
        
        // 狀態標籤
        let statusClass = '';
        let statusText = '';
        if (item.status === '已確認' || item.status === 'confirmed') {
            statusClass = 'status-confirmed';
            statusText = '已確認';
        } else if (item.status === '已取消' || item.status === 'cancelled') {
            statusClass = 'status-cancelled';
            statusText = '已取消';
        } else {
            statusClass = 'status-pending';
            statusText = '待確認';
        }
        
        // 簽到狀態
        const isCheckedIn = item.checkedIn || false;
        const checkinStatusClass = isCheckedIn ? 'checkin-yes' : 'checkin-no';
        const checkinStatusText = isCheckedIn ? '已搭乘' : '未搭乘';
        
        // ✅ 改用 Worker 實際回傳的欄位名稱
        row.innerHTML = `
            <td class="p-2 border">${item.date || '--'}</td>
            <td class="p-2 border">${item.route || '--'}</td>
            <td class="p-2 border">${item.name || '--'}</td>
            <td class="p-2 border">${item.department || '--'}</td>
            <td class="p-2 border">${item.phone || '--'}</td>
            <td class="p-2 border"><span class="${statusClass}">${statusText}</span></td>
            <td class="p-2 border"><span class="checkin-status ${checkinStatusClass}">${checkinStatusText}</span></td>
            <td class="p-2 border">
              <button class="checkin-btn ${isCheckedIn ? 'checked' : 'unchecked'}" 
                      data-id="${item.id || index}" 
                      data-checked="${isCheckedIn}">
                ${isCheckedIn ? '✅ 已簽到' : '🔄 標記搭乘'}
              </button>
            </td>
        `;
        reservationBody.appendChild(row);
    });
    
    // 添加簽到按鈕事件監聽器
    document.querySelectorAll('.checkin-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const id = this.dataset.id;
            const isCurrentlyChecked = this.dataset.checked === 'true';
            
            // 切換簽到狀態
            toggleCheckinStatus(id, !isCurrentlyChecked);
        });
    });
}

// 切換簽到狀態
function toggleCheckinStatus(id, newStatus) {
    const reservationIndex = allReservations.findIndex(item => 
        (item.id && item.id.toString() === id) || 
        (allReservations.indexOf(item).toString() === id)
    );
    
    if (reservationIndex !== -1) {
        allReservations[reservationIndex].checkedIn = newStatus;
        renderReservations(allReservations);
        
        const statusText = newStatus ? '已標記為已搭乘' : '已取消搭乘標記';
        showNotification(`成功更新簽到狀態：${statusText}`, 'success');
    }
}

// 顯示通知
function showNotification(message, type = 'info') {
    const existingNotification = document.querySelector('.notification');
    if (existingNotification) {
        existingNotification.remove();
    }
    
    const notification = document.createElement('div');
    notification.className = `notification fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${
        type === 'success' ? 'bg-green-500 text-white' : 
        type === 'error' ? 'bg-red-500 text-white' : 
        'bg-blue-500 text-white'
    }`;
    notification.textContent = message;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.remove();
    }, 3000);
}

// 搜尋功能
searchInput.addEventListener('input', (e) => {
    const query = e.target.value.toLowerCase().trim();
    if (query === '') {
        renderReservations(allReservations);
        return;
    }
    const filteredData = allReservations.filter(item => {
        return Object.values(item).some(val => 
            String(val).toLowerCase().includes(query)
        );
    });
    renderReservations(filteredData);
});

// 實際抓取預約資料
async function fetchReservations() {
    if (WORKER_URL === 'YOUR_ACTUAL_CLOUDFLARE_WORKER_URL_HERE') {
        reservationBody.innerHTML = `<tr><td colspan="8" class="p-4 text-center text-red-600 font-bold">
                                      錯誤：請先設定 Worker URL！
                                    </td></tr>`;
        return;
    }
    
    reservationBody.innerHTML = `<tr><td colspan="8" id="loadingMessage">
                                  <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-green-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                  </svg>
                                  載入中，請稍候...
                                </td></tr>`;

    try {
        const response = await fetch(`${WORKER_URL}?mode=reservations`);
        
        if (!response.ok) {
            throw new Error(`API 錯誤: ${response.status} ${response.statusText}`);
        }
        
        const data = await response.json();
        
        // 嘗試從不同位置取得預約資料
        if (data && Array.isArray(data.data)) {
            allReservations = data.data;
        } else if (data && Array.isArray(data.reservations)) {
            allReservations = data.reservations;
        } else if (Array.isArray(data)) {
            allReservations = data;
        } else {
            throw new Error('資料格式不正確：無法找到預約陣列');
        }
        
        // 按日期降冪排序
        allReservations.sort((a, b) => {
            const da = new Date(a.date || '1970-01-01');
            const db = new Date(b.date || '1970-01-01');
            return db - da;
        });

        // 為每筆資料添加簽到狀態
        allReservations.forEach(item => {
            if (item.checkedIn === undefined) {
                item.checkedIn = false;
            }
        });

        renderReservations(allReservations);

    } catch (error) {
        console.error('❌ 抓取預約資料失敗:', error);
        reservationBody.innerHTML = `<tr><td colspan="8" class="p-4 text-center text-red-600 font-bold">
                                      ❌ 資料載入失敗: ${error.message}
                                    </td></tr>`;
    }
}

// 初始化
document.addEventListener('DOMContentLoaded', function() {
  // 初始化設定
  initializeConfig();
  setupCapacityListeners();
  
  // 綁定按鈕事件
  document.getElementById('saveConfig').addEventListener('click', function() {
    saveConfigToLocal();
    showNotification('✅ 設定已儲存！', 'success');
  });
  
  document.getElementById('publishConfig').addEventListener('click', function() {
    publishConfigToFrontend();
  });
  
  // 從後端載入設定（可選）
  loadConfigFromBackend();
  
  // 其他現有的事件綁定
  document.querySelectorAll(".sidebar-btn").forEach(btn => {
    btn.addEventListener("click", () => {
        document.querySelectorAll(".sidebar-btn").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        
        const target = btn.dataset.target;
        sections.forEach(sec => {
            sec.id === target ? sec.classList.remove("hidden") : sec.classList.add("hidden");
        });

        if (target === 'reservations' && allReservations.length === 0) {
            fetchReservations();
        } else if (target === 'reservations') {
            renderReservations(allReservations);
        }
    });
  });

  document.getElementById('reloadLink').addEventListener('click', (e) => {
    e.preventDefault();
    allReservations = [];
    fetchReservations();
  });

  document.getElementById('config').classList.remove('hidden');
});

</script>

</body>
</html>
